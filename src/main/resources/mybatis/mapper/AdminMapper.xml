<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="Admin">

	<select id="selectAdmin" resultType="Admin">
	
		SELECT 
			adminId, password
		FROM
			admin
		WHERE
			adminId = #{adminId} and password = #{password}
	
	</select>
	
	<!-- 회원상세정보 -->
	<select id="selectUserList" resultType="Admember">
<!-- 		SELECT * FROM member -->
		select * from (
		select rownum rnum, c.* from(
			select * from member
			order by member_Id desc
		) c
	) member 
	where rnum BETWEEN #{startNo} AND #{endNo}
	</select>
	
	<!-- 게시판 -->
	<select id="selectCntUserAll" resultType="int">
  		select count(*) from member
  	</select>  
	
	<!-- 검색 -->
 	<select id="selectCntListSearchAll" resultType="int" parameterType="String">
  		select count(*) from member
  		where member_name like '%' || #{keyword} || '%'
  		or member_add like  '%' || #{keyword} || '%'
  		or member_rank like '%' || #{keyword} || '%'
  		or member_tell like '%' || #{keyword} || '%'
  		or member_nick like '%' || #{keyword} || '%'
  		or member_email like '%' || #{keyword} || '%'
  	</select>
  	
  	<!-- 회원 목록전체 검색 -->
  	<select id="selectSearchList" resultType="Admember" parameterType="map">

		select * from (
			select rownum rnum, c.* from(
				select * from member
				where member_name like '%' || #{keyword} || '%'
				or member_add like  '%' || #{keyword} || '%'
				or member_rank like '%' || #{keyword} || '%'
	  			or member_tell like '%' || #{keyword} || '%'
  				or member_nick like '%' || #{keyword} || '%'
  				or member_email like '%' || #{keyword} || '%'
				order by member_id desc
			) c
		) member 
		where rnum BETWEEN #{paging.startNo} AND #{paging.endNo}
	
  	</select>
	
	<delete id="deleteList">
  		delete from member
		where member_id = #{memberId}
  	</delete>
	
	<insert id="insertTest">
		INSERT INTO covid19_pat (PAT_NO, PAT_NAME, PAT_LOC, PAT_TIME, PAT_TRT_SW, PAT_DIE_SW, PAT_AGE, PAT_SEX, PAT_ROUTE) 
		VALUES (covid19_pat_SEQ.NEXTVAL, #{patName}, #{patLoc}, #{patTime}, #{patTrt}, #{patDie}, #{patAge}, #{patSex}, #{patRoute})
	</insert>
	
	
	
</mapper>